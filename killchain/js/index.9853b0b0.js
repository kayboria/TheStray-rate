import{_ as q}from"./arrowIcon.6ee2deee.js";import{g as B,u as E,K as F,L as V,s as A,r as z,o as a,c as n,a as c,A as I,z as h,b as x,F as v,y as k,M as T,t as u,w as M,d as $,p as W,f as H,N as K,e as R,_ as j}from"./entry.37e139cb.js";import{u as G}from"./asyncData.85dba75c.js";const J=y=>(W("data-v-4d246980"),y=y(),H(),y),O={class:"page-container"},P=J(()=>c("h1",null,"Writeups",-1)),Q={class:"sort-line"},U=["onClick"],X=["data-link"],Y={key:0},Z={class:"discreet"},tt={key:1},et={class:"discreet"},st=B({__name:"index",async setup(y){let m,C;E({title:"Writeups"});const{data:D}=([m,C]=F(()=>G("home",()=>K("/writeups/").without(["body"]).only(["_file","_path","ctf","category","author","title"]).find())),m=await m,C(),m),N=["year","ctf","category"],b=["a","d"],g=V(),_=A(g.query.cat??N[0]),d=A(g.query.dir?g.query.dir===b[0]:!1);function S(o){o==_.value?d.value=!d.value:(_.value=o,d.value=!1),T(`/writeups/?cat=${_.value}&dir=${b[d.value?0:1]}`,{replace:!0})}const L=z(()=>{const o=new Map;(D.value??[]).map(t=>{if(t._file===void 0)throw new Error("A file has not _file property");const e=t._file.split(/\/[0-9]+\.|\//),r=parseInt(e[1]),p=t.ctf??e[2].replaceAll("_"," "),f=t.category,s=t.author;if(!f||!s)throw new Error(`File ${t._file} is missing some fields`);switch(_.value){case"year":w(o,r,p,{category:f,author:s,name:t.title??"Name not found",link:t._path??"/404"});break;case"ctf":w(o,p,r,{category:f,author:s,name:t.title??"Name not found",link:t._path??"/404"});break;case"category":w(o,f,p,{year:r,author:s,name:t.title??"Name not found",link:t._path??"/404"});break}});const i=[...o.entries()].sort((t,e)=>t[0].toString().toLowerCase().localeCompare(e[0].toString().toLowerCase()));return new Map(d.value?i:i.reverse())});function w(o,l,i,t){o.has(l)||o.set(l,new Map);let e=o.get(l);if(!e)return;e.has(i)||e.set(i,[]);let r=e.get(i);r&&r.push(t)}return(o,l)=>{const i=q,t=R;return a(),n("div",O,[P,c("div",Q,[c("button",{class:I(["sort-arrow",{reverse:!h(d)}]),onClick:l[0]||(l[0]=e=>S(h(_)))},[x(i)],2),(a(),n(v,null,k(N,e=>c("button",{class:I(["sort-btn",{active:e===h(_)}]),key:e,onClick:r=>S(e)},u(e),11,U)),64))]),(a(!0),n(v,null,k(h(L),([e,r])=>(a(),n("div",{key:e},[c("h3",null,u(e),1),(a(!0),n(v,null,k(r,([p,f])=>(a(),n("div",{key:p,class:"mid-section"},[c("h4",null,u(p),1),c("ul",null,[(a(!0),n(v,null,k(f,s=>(a(),n("li",{key:s.name,"data-link":s.link+"/"},[h(_)==="category"?(a(),n("p",Y,[x(t,{to:s.link+"/"},{default:M(()=>[$(u(s.name),1)]),_:2},1032,["to"]),c("span",Z," (by "+u(s.author)+")",1)])):(a(),n("p",tt,[x(t,{to:s.link+"/"},{default:M(()=>[$(u(s.name),1)]),_:2},1032,["to"]),c("span",et," (by "+u(s.author)+" - "+u(s.category)+")",1)]))],8,X))),128))])]))),128))]))),128))])}}});const rt=j(st,[["__scopeId","data-v-4d246980"]]);export{rt as default};
